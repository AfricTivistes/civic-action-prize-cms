/*!
 * jQuery Countdown plugin v1.0
 * http://www.littlewebthings.com/projects/countdown/
 *
 * Copyright 2010, Vassilis Dourdounis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(a){a.fn.countDown=function(b){return config={},a.extend(config,b),diffSecs=this.setCountDown(config),config.onComplete&&a.data(a(this)[0],'callback',config.onComplete),config.omitWeeks&&a.data(a(this)[0],'omitWeeks',config.omitWeeks),a('#'+a(this).attr('id')+' .digit').html('<div class="top"></div><div class="bottom"></div>'),a(this).doCountDown(a(this).attr('id'),diffSecs,500),this},a.fn.stopCountDown=function(){clearTimeout(a.data(this[0],'timer'))},a.fn.startCountDown=function(){this.doCountDown(a(this).attr('id'),a.data(this[0],'diffSecs'),500)},a.fn.setCountDown=function(b){var c=new Date,d;return b.targetDate?c=new Date(b.targetDate.month+'/'+b.targetDate.day+'/'+b.targetDate.year+' '+b.targetDate.hour+':'+b.targetDate.min+':'+b.targetDate.sec+(b.targetDate.utc?' UTC':'')):b.targetOffset&&(c.setFullYear(b.targetOffset.year+c.getFullYear()),c.setMonth(b.targetOffset.month+c.getMonth()),c.setDate(b.targetOffset.day+c.getDate()),c.setHours(b.targetOffset.hour+c.getHours()),c.setMinutes(b.targetOffset.min+c.getMinutes()),c.setSeconds(b.targetOffset.sec+c.getSeconds())),d=new Date,diffSecs=Math.floor((c.valueOf()-d.valueOf())/1e3),a.data(this[0],'diffSecs',diffSecs),diffSecs},a.fn.doCountDown=function(d,b,c){$this=a('#'+d),b<=0&&(b=0,a.data($this[0],'timer')&&clearTimeout(a.data($this[0],'timer'))),secs=b%60,mins=Math.floor(b/60)%60,hours=Math.floor(b/60/60)%24,a.data($this[0],'omitWeeks')==!0?(days=Math.floor(b/60/60/24),weeks=Math.floor(b/60/60/24/7)):(days=Math.floor(b/60/60/24)%7,weeks=Math.floor(b/60/60/24/7)),$this.dashChangeTo(d,'seconds_dash',secs,c||800),$this.dashChangeTo(d,'minutes_dash',mins,c||1200),$this.dashChangeTo(d,'hours_dash',hours,c||1200),$this.dashChangeTo(d,'days_dash',days,c||1200),$this.dashChangeTo(d,'weeks_dash',weeks,c||1200),a.data($this[0],'diffSecs',b),b>0?(e=$this,t=setTimeout(function(){e.doCountDown(d,b-1)},1e3),a.data(e[0],'timer',t)):(cb=a.data($this[0],'callback'))&&a.data($this[0],'callback')()},a.fn.dashChangeTo=function(f,e,c,g){var b,d;$this=a('#'+f);for(b=$this.find('.'+e+' .digit').length-1;b>=0;b--)d=c%10,c=(c-d)/10,$this.digitChangeTo('#'+$this.attr('id')+' .'+e+' .digit:eq('+b+')',d,g)},a.fn.digitChangeTo=function(b,d,c){c||(c=800),a(b+' div.top').html()!=d+''&&(a(b+' div.top').css({display:'none'}),a(b+' div.top').html(d||'0').slideDown(c),a(b+' div.bottom').animate({height:''},c,function(){a(b+' div.bottom').html(a(b+' div.top').html()),a(b+' div.bottom').css({display:'block',height:''}),a(b+' div.top').hide().slideUp(10)}))}})(jQuery)